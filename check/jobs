#!/bin/bash

# Ensure script is run from the root directory
if [ ! -f "app/planqtn_jobs/Dockerfile" ]; then
    echo "Error: This script must be run from the root directory of the repository"
    echo "Current directory: $(pwd)"
    echo "Expected to find: app/planqtn_jobs/Dockerfile"
    exit 1
fi

export PYTHONPATH=`pwd`:`pwd`/app

cd app
black --check planqtn_types
black --check planqtn_jobs 
pytest planqtn_jobs

cd ..
hack/build_jobs_server.sh