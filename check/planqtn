#!/bin/bash

# Ensure script is run from the root directory
if [ ! -f "./pyproject.toml" ]; then
    echo "Error: This script must be run from the root directory of the repository"
    echo "Current directory: $(pwd)"
    echo "Expected to find: pyproject.toml"
    exit 1
fi

set -e

export PYTHONPATH="."

echo "Running black"
black planqtn/** --check
echo Running `mypy --version`
mypy planqtn
echo "Running pylint"
pylint planqtn
echo "Running darglint2"
darglint2 planqtn
echo "Running pytest"
pytest planqtn
echo "Running doctest"
find planqtn -name '*.py' | xargs python -m doctest

echo "All checks passed"