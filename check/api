#!/bin/bash

# Ensure script is run from the root directory
if [ ! -f "app/planqtn_api/Dockerfile" ]; then
    echo "Error: This script must be run from the root directory of the repository"
    echo "Current directory: $(pwd)"
    echo "Expected to find: app/planqtn_api/Dockerfile"
    exit 1
fi

export PYTHONPATH=`pwd`:`pwd`/app

cd app

black --check planqtn_types
black --check planqtn_api
pytest planqtn_api

cd ..
hack/build_api_server.sh